Goal: Safely add a new PostgreSQL table donation_doc to support attaching documents (e.g. receipts, manifests, delivery notices) to donations.

Critical constraints (do NOT violate):

NO breaking changes to existing:

Database tables, columns, constraints, indexes, triggers, or data

Application logic, workflows, or behaviors

Security fixes (headers, CSP, CSRF, cookies, auth, RBAC, etc.)

NO regressions to:

Existing security hardening

Existing donation, inventory, and logistics workflows

Only add this table and any strictly necessary indexes/constraints.

Keep the table definition consistent with the existing naming conventions and constraint patterns used elsewhere in the schema.

Please:

Add a migration / DDL script that creates this table if it does not exist.

Ensure the foreign key to donation is correctly wired and uses the existing donation table primary key.

Keep all field types and constraints exactly as specified below, correcting obvious typos only where needed so the DDL is valid (e.g. the CHECK constraint must reference the correct column and valid MIME types).

Do not modify any other tables, columns, or constraints.

Use the following final DDL for the new table:

create table if not exists donation_doc
(
    -- Unique ID assigned to document - Tracks document throughout system
    document_id integer not null generated by default as identity
        constraint pk_donation_doc primary key,

    donation_id integer not null
        constraint fk_donation_doc_donation references donation,

    -- Type of document e.g. Receipt, Manifest, Bill of materials, Delivery notice, etc.
    document_type varchar(40) not null,

    -- Description of document purpose and/or content
    document_desc varchar(255) not null,

    -- Original name of the uploaded file
    file_name varchar(80) not null,

    -- Format of file. Supported formats: application/pdf, image/jpeg
    file_type varchar(30) not null
        constraint c_donation_doc_1
        check (file_type in ('application/pdf','image/jpeg')),

    -- Size of file in MB e.g. 5MB
    file_size varchar(20),

    create_by_id varchar(20) not null,
    create_dtime timestamp(0) without time zone not null,
    update_by_id varchar(20) not null,
    update_dtime timestamp(0) without time zone not null,
    version_nbr integer not null
);


Implementation notes:

Use the existing migration / DDL pattern already used in the project (e.g. raw SQL file, Alembic-style migration, or equivalent) instead of inventing a new approach.

If there is a standard way in this codebase to add indexes (for example, an index on donation_id for faster lookups), follow that pattern without changing any existing indexes.

Do not add any triggers, default values, or additional constraints beyond what is specified unless the project has a very clear, existing pattern that would be violated by omitting them.

After adding the table:

Do not introduce any new routes, forms, or upload logic yet.

Only ensure the database schema can be applied cleanly without errors, and that all existing tests / flows continue to work unchanged.